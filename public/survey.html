<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>
    <!-- reset style sheet -->
    <link rel="stylesheet" href="../styling/reset.css">
    <!-- jQuery library provided by Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
    <!-- Popper.js library provided by Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
        crossorigin="anonymous">
    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
        crossorigin="anonymous">
    <!-- custom style sheet -->
    <link rel="stylesheet" href="../styling/custom_styling.css">
    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>

    <div class="container">
        <h2><strong>Survey Questions</strong></h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" placeholder="Your Username" required>
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" placeholder="http://...." required>
        <hr>
        <h3><strong>Question #1</strong></h3>
        <h4> Your mind is always buzzing with unexplored ideas and plans.</h4>
        <select class="chosen-select" id="q1" style="width: 145px;">
            <option value></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <div>
            <div class="chosen-container chosen-container-single" id="q1_chosen" style="width: 145px;" title>
                <div class="chosen-drop">
                    <div class="chosen-search">
                        <input type="text" autocomplete="off">
                    </div>
                    <ul class="chosen-results">
                        <li class="active-result" data-option-array-index="1">1 (Strongly Disagree)</li>
                        <li class="active-result" data-option-array-index="2">2</li>
                        <li class="active-result" data-option-array-index="3">3</li>
                        <li class="active-result" data-option-array-index="4">4</li>
                        <li class="active-result" data-option-array-index="5">5 (Strongly Agree)</li>
                    </ul>
                </div>
            </div>
        </div>




    </div>

    <script type="text/javascript">
        // Chosen CSS
        var config = {
          ".chosen-select": {},
          ".chosen-select-deselect": {
            allow_single_deselect: true
          },
          ".chosen-select-no-single": {
            disable_search_threshold: 10
          },
          ".chosen-select-no-results": {
            no_results_text: "Oops, nothing found!"
          },
          ".chosen-select-width": {
            width: "25%"
          }
        };
    
        for (var selector in config) {
          $(selector).chosen(config[selector]);
        }
    
        // Capture the form inputs
        $("#submit").on("click", function(event) {
          event.preventDefault();
    
          // Form validation
          function validateForm() {
            var isValid = true;
            $(".form-control").each(function() {
              if ($(this).val() === "") {
                isValid = false;
              }
            });
    
            $(".chosen-select").each(function() {
    
              if ($(this).val() === "") {
                isValid = false;
              }
            });
            return isValid;
          }
    
          // If all required fields are filled
          if (validateForm()) {
            // Create an object for the user"s data
            var userData = {
              name: $("#name").val(),
              photo: $("#photo").val(),
              scores: [
                $("#q1").val(),
               /* $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()*/
              ]
            };
    
            // AJAX post the data to the friends API.
            $.post("/api/friends", userData, function(data) {
    
              // Grab the result from the AJAX post so that the best match's name and photo are displayed.
              $("#match-name").text(data.name);
              $("#match-img").attr("src", data.photo);
    
              // Show the modal with the best match
              $("#results-modal").modal("toggle");
    
            });
          } else {
            alert("Please fill out all fields before submitting!");
          }
        });
      </script>
  
</body>

</html>